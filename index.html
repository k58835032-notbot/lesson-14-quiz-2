<!DOCTYPE html>

<html lang="ja">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Hiragana Match Game</title>

<style>

body {

  font-family: "Hiragino Kaku Gothic Pro","Meiryo",sans-serif;

  background:#fff;

  text-align:center;

  padding:30px;

  color:#333;

}

h1 {

  color:#b23b3b;

  margin-bottom:10px;

}

#game {

  display:flex;

  justify-content:center;

  gap:40px;

  margin-top:30px;

}

.column {

  display:grid;

  grid-template-columns:1fr;

  gap:12px;

}

.card {

  padding:14px 20px;

  border-radius:12px;

  font-size:22px;

  cursor:pointer;

  border:3px solid #b23b3b;

  transition:.2s;

}

.romaji {

  background:#fff;

  color:#b23b3b;

}

.kana {

  background:#b23b3b;

  color:#fff;

}

.selected {

  background:#ffd6e8 !important;

}

.matched {

  background:#ccc !important;

  color:#666 !important;

  cursor:default;

}

#status {

  font-size:20px;

  margin-top:20px;

}

#gif {

  margin-top:20px;

  max-width:260px;

  border-radius:12px;

}

</style>

</head>

<body>

<h1>ðŸ§© Hiragana Matching Game</h1>

<p>Match the romaji with the correct hiragana</p>

<div id="game">

  <div class="column" id="romajiCol"></div>

  <div class="column" id="kanaCol"></div>

</div>

<div id="status"></div>

<img id="gif" src="" alt="">

<script>

/* ===============================

   FULL HIRAGANA (each once)

================================ */

const kanaList = [

  ["ã‚","a"],["ã„","i"],["ã†","u"],["ãˆ","e"],["ãŠ","o"],

  ["ã‹","ka"],["ã","ki"],["ã","ku"],["ã‘","ke"],["ã“","ko"],

  ["ã•","sa"],["ã—","shi"],["ã™","su"],["ã›","se"],["ã","so"],

  ["ãŸ","ta"],["ã¡","chi"],["ã¤","tsu"],["ã¦","te"],["ã¨","to"],

  ["ãª","na"],["ã«","ni"],["ã¬","nu"],["ã­","ne"],["ã®","no"],

  ["ã¯","ha"],["ã²","hi"],["ãµ","fu"],["ã¸","he"],["ã»","ho"],

  ["ã¾","ma"],["ã¿","mi"],["ã‚€","mu"],["ã‚","me"],["ã‚‚","mo"],

  ["ã‚„","ya"],["ã‚†","yu"],["ã‚ˆ","yo"],

  ["ã‚‰","ra"],["ã‚Š","ri"],["ã‚‹","ru"],["ã‚Œ","re"],["ã‚","ro"],

  ["ã‚","wa"],["ã‚’","wo"],["ã‚“","n"],

  ["ãŒ","ga"],["ãŽ","gi"],["ã","gu"],["ã’","ge"],["ã”","go"],

  ["ã–","za"],["ã˜","ji"],["ãš","zu"],["ãœ","ze"],["ãž","zo"],

  ["ã ","da"],["ã¢","ji"],["ã¥","zu"],["ã§","de"],["ã©","do"],

  ["ã°","ba"],["ã³","bi"],["ã¶","bu"],["ã¹","be"],["ã¼","bo"],

  ["ã±","pa"],["ã´","pi"],["ã·","pu"],["ãº","pe"],["ã½","po"],

  ["ãã‚ƒ","kya"],["ãã‚…","kyu"],["ãã‚‡","kyo"],

  ["ã—ã‚ƒ","sha"],["ã—ã‚…","shu"],["ã—ã‚‡","sho"],

  ["ã¡ã‚ƒ","cha"],["ã¡ã‚…","chu"],["ã¡ã‚‡","cho"],

  ["ã«ã‚ƒ","nya"],["ã«ã‚…","nyu"],["ã«ã‚‡","nyo"],

  ["ã²ã‚ƒ","hya"],["ã²ã‚…","hyu"],["ã²ã‚‡","hyo"],

  ["ã¿ã‚ƒ","mya"],["ã¿ã‚…","myu"],["ã¿ã‚‡","myo"],

  ["ã‚Šã‚ƒ","rya"],["ã‚Šã‚…","ryu"],["ã‚Šã‚‡","ryo"],

  ["ãŽã‚ƒ","gya"],["ãŽã‚…","gyu"],["ãŽã‚‡","gyo"],

  ["ã˜ã‚ƒ","ja"],["ã˜ã‚…","ju"],["ã˜ã‚‡","jo"],

  ["ã³ã‚ƒ","bya"],["ã³ã‚…","byu"],["ã³ã‚‡","byo"],

  ["ã´ã‚ƒ","pya"],["ã´ã‚…","pyu"],["ã´ã‚‡","pyo"]

];

/* ===============================

   GAME STATE

================================ */

let pool = [...kanaList].sort(() => Math.random() - 0.5);

let currentPairs = [];

let selectedRomaji = null;

let selectedKana = null;

let round = 0;

/* ===============================

   ROUND SETUP

================================ */

function nextRound() {

  if (pool.length === 0) return endGame();

  round++;

  currentPairs = pool.splice(0, 4);

  selectedRomaji = selectedKana = null;

  document.getElementById("status").textContent =

    `Round ${round}`;

  render();

}

function render() {

  const romajiCol = document.getElementById("romajiCol");

  const kanaCol = document.getElementById("kanaCol");

  romajiCol.innerHTML = kanaCol.innerHTML = "";

  const romajiCards = [...currentPairs].sort(() => Math.random() - 0.5);

  const kanaCards = [...currentPairs].sort(() => Math.random() - 0.5);

  romajiCards.forEach(([kana, romaji]) => {

    const div = document.createElement("div");

    div.className = "card romaji";

    div.textContent = romaji;

    div.onclick = () => selectRomaji(div, kana);

    romajiCol.appendChild(div);

  });

  kanaCards.forEach(([kana]) => {

    const div = document.createElement("div");

    div.className = "card kana";

    div.textContent = kana;

    div.onclick = () => selectKana(div, kana);

    kanaCol.appendChild(div);

  });

}

function selectRomaji(el, kana) {

  if (el.classList.contains("matched")) return;

  clearSelection("romaji");

  el.classList.add("selected");

  selectedRomaji = { el, kana };

  checkMatch();

}

function selectKana(el, kana) {

  if (el.classList.contains("matched")) return;

  clearSelection("kana");

  el.classList.add("selected");

  selectedKana = { el, kana };

  checkMatch();

}

function clearSelection(type) {

  document.querySelectorAll("." + type).forEach(c =>

    c.classList.remove("selected")

  );

}

/* ===============================

   MATCH CHECK

================================ */

function checkMatch() {

  if (!selectedRomaji || !selectedKana) return;

  if (selectedRomaji.kana === selectedKana.kana) {

    selectedRomaji.el.classList.add("matched");

    selectedKana.el.classList.add("matched");

    selectedRomaji = selectedKana = null;

    if (document.querySelectorAll(".matched").length === 8) {

      setTimeout(nextRound, 700);

    }

  }

}

/* ===============================

   END SCREEN

================================ */

function endGame() {

  document.getElementById("game").style.display = "none";

  const status = document.getElementById("status");

  const gif = document.getElementById("gif");

  status.textContent = "ðŸŒŸ Amazing work! You matched all hiragana!";

  gif.src =

    "https://raw.githubusercontent.com/k58835032-notbot/lesson-9-morae/main/cool%20cute%20cat.gif";

}

/* ===============================

   START

================================ */

nextRound();

</script>

</body>

</html>

